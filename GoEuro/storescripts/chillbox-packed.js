/*	ChillBox Packed - Version 1.3.1 - jQuery Plug-in
	by Christopher Hill - http://www.chillwebdesigns.co.uk/
	Last Modification: 04.04.2012
	
	For more information, visit: http://www.chillwebdesigns.co.uk/chillbox.html
	
	Licensed under the Creative Commons Attribution 3.0 Unported License - http://creativecommons.org/licenses/by/3.0/
	- Free for use in both personal and commercial projects
	- Attribution requires leaving author name, author link, and the license info intact 
*/
(function($){

		// ChillBox Function
		$.fn.ChillBox = function (options){
			
			var defaults = { 
			
				// Settings for modification.													.
				OLO  :		  '75', // Overlay opacity in (%).
				OLC  :	 '#000000', // Background overlay colour using (hex colour codes).
				LTC	 :	 '#FFFFFF', // Loading text colour using (hex colour codes).
				CBBC :	 '#000000', // ChillBox background colour using (hex colour codes).	
	 			CBTC :	 '#FFFFFF', // ChillBox title colour, uses (hex) colour code.
				BCCB :	 '#000000',	// ChillBox border and image border colour using (hex colour codes).
				BC   :	 '#000000', // ChillBox button text colour using (hex colour codes).
				BTC	 :	 '#FFFFFF', // ChillBox button text colour using (hex colour codes).
				BBCH :	 '#007EFF', // ChillBox button text colour on hover using (hex colour codes).
				BTS	 :		  '11', // ChillBox button text size in (px).
				CBTS :		  '12', // ChillBox title text size in (px).
				LTS	 :		  '12', // Loading text size in (px).
				LT	 :'Loading...', // Loading text value.
				FIOL :		   250, // Overlay fade in time (milliseconds).
				CBFI :		   400, // ChillBox fade in time time (milliseconds).
				CBFO :         400, // ChillBox and Overlay fade out time time (milliseconds).
	 			CLSB :		   'X', // ChillBox close button text value.
				PREV :	 '&#9668;', // ChillBox previous button text value.
				NEXT :   '&#9658;', // ChillBox next button text value.	
	 			EKBB :		'true', // Enable keyboard buttons, (N / >) - Next, (P / <) - Prev, (ESC / C / X) - Close.			
				CBCC :     'false', // Close ChillBox by clicking the ChillBox image.
				OLCC :      'true', // Close ChillBox by clicking the overlay.
				LOOP :     'false', // Enable ChillBox next / prvious image loop.
				ECBC :		'true', // Show ChillBoxGroup image counter.
				ST	 :		'true', // Show ChillBox titles.
				SHAD :		'true'	// Show ChillBx shadow.
			
			}; 
var cb = $.extend(defaults, options);this.each(function(){var doc=$(document),win=$(window);$(this).click(function(){var rel=$(this).attr('rel'),relSize=$('[rel='+rel+']').size(),index=$('[rel='+rel+']').index(this);$(this).attr({'ChillBox-position':index});var hf=$(this).attr("href");if($().jquery<="1.6.0"){var attr=$(this).attr("title"),tit=$(this).attr("title")}else{var attr=$(this).prop("title"),tit=$(this).prop("title")}if(attr=='undefined'||attr==false){tit="&nbsp;"}$('<div class="ChillBox"><img src="'+hf+'" />'+'<div class="CBTIT"></div><div class="CBNAV"><a id="close">'+cb.CLSB+'</a></div></div>').appendTo('body');if(cb.ST=="true"){$('<span>'+tit+'</span>').appendTo('.CBTIT')}if((rel.match("Group")||rel.match("group"))&&relSize>1){$('<a id="next">'+cb.NEXT+'</a><a id="prev">'+cb.PREV+'</a>').appendTo('.CBNAV');if(cb.ECBC=="true"){$('<span id="count">'+parseInt(index+1,10)+' /   '+relSize+'</span>').appendTo('.CBNAV')}}if(cb.CBCC=='true'){$('.ChillBox img').click(function(){$('#close').click()})}$('[rel^='+rel+']').filter('.selected').removeClass('selected');$(this).addClass('selected');var current=parseInt($('[rel^='+rel+']').filter('.selected').attr('ChillBox-position'),10);if(cb.LOOP=="false"){if($('[rel='+rel+']').last().hasClass('selected')){$('#next').remove()}if($('[rel='+rel+']').first().hasClass('selected')){$('#prev').remove()}}if(cb.EKBB=="true"){doc.keydown(function(e){if(e.keyCode==37||e.keyCode==80){setTimeout(function(){$('#prev').click()},250)}});doc.keydown(function(e){if(e.keyCode==39||e.keyCode==78){setTimeout(function(){$('#next').click()},250)}})}$('#prev').click(function(){$('.ChillBox,#shadow').remove();setTimeout(function(){var to=$('[rel='+rel+']').eq(current-1);if(!to.size()){to=$('[rel='+rel+']').eq(0)}if(to.size()){to.click()}},400);return false});$('#next').click(function(){$('.ChillBox,#shadow').remove();setTimeout(function(){var too=$('[rel='+rel+']').eq(current+1);if(!too.size()){too=$('[rel='+rel+']').eq(0)}if(too.size()){too.click()}},400);return false});ChillBox();return false});function ChillBox(){if($('.Ov').is(':visible')){var OLV="true"}$('.Ov,.ChillBox,.Loading').bind("contextmenu",function(e){return false});if(OLV!="true"||OLV==null){Overlay();Loading()}$(".ChillBox").css({opacity:'0',width:'0',bottom:'0',top:'0',right:'0',left:'0',lineHeight:'1.35',verticalAlign:'baseline',height:'0',zIndex:'1003',border:'2px solid',borderColor:cb.BCCB,fontFamily:'Arial',backgroundColor:cb.CBBC});$(".ChillBox img").load(function(){var imgHeight1;if($().jquery>="1.4.3"){imgHeight1=$(".ChillBox img").height()}else{imgHeight1=jQuery.css(jQuery('.ChillBox img')[0],'height')}var WinH=win.height(),WinW=win.width(),Padding=((WinH+WinW)/2)*0.25;if(WinH<imgHeight1){$(this).css({height:WinH-Padding,margin:Padding/2})}var imgWidth1;if($().jquery>="1.4.3"){imgWidth1=$('.ChillBox img').width()}else{imgWidth1=jQuery.css(jQuery('.ChillBox img')[0],'width')}var NewW=imgWidth1;if(WinW<NewW){$(this).css({width:WinW-Padding,margin:Padding/2})}var imgWidth;var imgHeight;if($().jquery>="1.4.3"){imgWidth=$('.ChillBox img').width();imgHeight=$('.ChillBox img').height()}else{imgWidth=jQuery.css(jQuery('.ChillBox img')[0],'width');imgHeight=jQuery.css(jQuery('.ChillBox img')[0],'height')}$(".CBTIT").css({width:imgWidth-152,margin:'0 11px 11px 11px',"float":'left',textAlign:'justify',opacity:'0',padding:'3px 0',fontSize:cb.CBTS+"px",display:'block',backgroundColor:cb.CBBC,color:cb.CBTC});$(".CBTIT span").css({margin:'0'});$(".CBNAV").css({width:'130px',margin:'0 11px 11px 11px',"float":'right',opacity:'0',backgroundColor:cb.CBBC});$(".CBNAV a").css({"float":'right'});$(".CBNAV a#close").css({margin:'0 0 0 8px',padding:'2px 6px'});$(".CBNAV span").css({padding:'3px 0',marginRight:'8px',color:cb.CBTC,fontSize:cb.CBTS+"px","float":'right'});$(".CBNAV a#close,.CBNAV a#next,.CBNAV a#prev").css({backgroundColor:cb.BC,cursor:'pointer',color:cb.BTC,fontSize:cb.BTS+"px",border:'2px solid',borderColor:cb.BCCB,"float":'right',textDecoration:'none'});$(".CBNAV a#next,.CBNAV a#prev").css({margin:'0px 2px 0px 2px',padding:'2px 4px'});$(".ChillBox img").css({opacity:'0',margin:'11px',border:'2px solid',borderColor:cb.BCCB,padding:'0'});var titHeight;if($().jquery>="1.4.3"){titHeight=$('.CBTIT span').height()}else{titHeight=jQuery.css(jQuery('.CBTIT span')[0],'height')}if($.browser.msie&&$.browser.version<=6||navigator.platform=='iPad'||navigator.platform=='iPhone'||navigator.platform=='iPod'){$(".CBTIT").css({margin:'0 11px 11px 6px'});$(".CBNAV").css({margin:'0 6px 11px 11px'});$(".CBNAV span").css({padding:'4px 0'});win.scroll(function(){$(".ChillBox,#shadow").css({top:win.scrollTop()+win.height()/2+"px"})});if(cb.SHAD=='true'&&$.browser.msie&&$.browser.version<=6){$('<div id="shadow"></div>').appendTo('body');$('#shadow').css({display:'none',backgroundColor:'#000',margin:'5px 0 0 0',zIndex:'1001',filter:'progid:DXImageTransform.Microsoft.Blur(pixelradius=9)',MsFilter:'progid:DXImageTransform.Microsoft.Blur(pixelradius=9)',position:'absolute',top:win.scrollTop()+win.height()/2+"px",left:'49.5%',marginTop:-((imgHeight+titHeight+68)/2),marginLeft:-((imgWidth+46)/2),width:(imgWidth+30),height:(imgHeight+titHeight+50)})}$(".ChillBox").css({position:'absolute',left:'49.5%',top:win.scrollTop()+win.height()/2+"px",height:(imgHeight+1)-imgHeight}).animate({opacity:"1",marginLeft:-((imgWidth+26)/2),marginTop:-((imgHeight+39+titHeight+3)/2),width:(imgWidth+30),height:(imgHeight+39+titHeight+6)},cb.CBFI,function(){$(".ChillBox img,.CBTIT,.CBNAV").fadeTo(cb.CBFI,'1',function(){if($.browser.msie){this.style.removeAttribute("filter")}});$('#shadow').show(1)})}else{if(cb.SHAD=='true'&&navigator.platform!='iPad'||navigator.platform!='iPhone'||navigator.platform!='iPod'){$('<div id="shadow"></div>').hide().appendTo('body');$('#shadow').css({backgroundColor:'#000',margin:'0',zIndex:'1001',filter:'progid:DXImageTransform.Microsoft.Blur(pixelradius=8)',MsFilter:'progid:DXImageTransform.Microsoft.Blur(pixelradius=8)',position:'fixed',top:win.height()/2,left:'49.5%',marginTop:-((imgHeight+titHeight+66)/2),marginLeft:-((imgWidth+46)/2),width:(imgWidth+34),height:(imgHeight+titHeight+54)});$(".ChillBox").css({WebkitBoxShadow:'0 0 1em hsla(0, 0%, 0%, 1.0)',MozBoxShadow:'0 0 1em hsla(0, 0%, 0%, 1.0)',boxShadow:'0 0 1em hsla(0, 0%, 0%, 1.0) ',top:win.height()/2+"px"})}if(cb.SHAD!='true'){$("div.ChillBox").css({WebkitBoxShadow:'none',MozBoxShadow:'none',boxShadow:'none'});$("div#shadow").remove()}$(".ChillBox").css({top:win.height()/2,position:'fixed',left:'49.5%'}).animate({opacity:"1",marginLeft:-((imgWidth+26)/2),marginTop:-((imgHeight+39+titHeight+3)/2),width:(imgWidth+26),height:(imgHeight+39+titHeight+3)},cb.CBFI,function(){if($.browser.msie){$('#shadow').show(1)}$(".ChillBox img,.CBTIT,.CBNAV").fadeTo(cb.CBFI,'1',function(){if($.browser.msie){this.style.removeAttribute("filter")}})})}$(".ChillBox a#next,.ChillBox a#prev,.ChillBox a#close").hover(function(){$(this).css({color:cb.BBCH})},function(){$(".ChillBox a#next,.ChillBox a#prev,.ChillBox a#close").css({color:cb.BTC})});$('#close').click(function(){$(".ChillBox img,.ChillBox span,.ChillBox a,.Loading,#shadow").remove();$('.Ov').fadeTo(cb.CBFO,'0',function(){$('.Ov,.ChillBox').remove()});if($.browser.msie&&$.browser.version<=6||navigator.platform=='iPad'||navigator.platform=='iPhone'||navigator.platform=='iPod'){$(".ChillBox").animate({opacity:"0",left:'49.5%',top:win.scrollTop()+win.height()/2+"px",marginLeft:(imgWidth/2),marginTop:(imgHeight/2)-15,width:-(imgWidth+26),height:-(imgHeight+52)},cb.CBFO)}else{$(".ChillBox").animate({opacity:"0",left:'49.5%',top:$(window).height()/2+"px",marginLeft:(imgWidth/2),marginTop:(imgHeight/2)-15,width:-(imgWidth+26),height:-(imgHeight+52)},cb.CBFO)}});if(cb.OLCC=='true'){$('.Ov').click(function(){$('#close').click()});$('.Ov').hover().css({cursor:'pointer'})}if(cb.CBCC=='true'){$('.ChillBox img').click(function(){$('#close').click()});$('.ChillBox img').hover().css({cursor:'pointer'})}if(cb.EKBB=='true'){if(cb.EKBB=="true"){doc.keypress(function(e){if(e.keyCode==120||e.keyCode==99){$('#close').click()}});doc.keydown(function(e){if(e.keyCode==27||e.keyCode==88||e.keyCode==67){$('#close').click()}})}}})}function Overlay(){$('.Ov,.Loading,.ChillBox img').bind("contextmenu",function(e){return false});var winHeight=$('.ChillBox').height()-$(window).height();var winWidth=$(window).width();var pageHeight=$(document).height()-$('.ChillBox').height();var divNo=Math.round(pageHeight/4096).toFixed(0);var divLast=(((pageHeight/4096)-1)*4096);if(pageHeight>4096){for(i=0;divNo>i;i++){$('<div class="Ov"></div>').hide().appendTo('body');$('.Ov:eq('+i+')').css({backgroundColor:cb.OLC,bottom:'0',right:'0',top:i*4096,left:'0',margin:'0',padding:'0',outline:'0',border:'0',zoom:'1',width:winWidth,whiteSpace:'nowrap',position:'absolute',zIndex:'1000',height:'4096px'})}$('.Ov:last').css({height:divLast+'px'})}else{$('<div class="Ov"></div>').hide().appendTo('body');$('.Ov').css({backgroundColor:cb.OLC,bottom:'0',right:'0',top:'0',left:'0',margin:'0',padding:'0',width:'100%',position:'absolute',zIndex:'1000',height:pageHeight})}$(window).resize(function(){$('.Ov').css({width:$(window).width()})});if(parseInt(cb.OLO,10)<='9'){$('.Ov').fadeTo(cb.FIOL,"0.0"+cb.OLO)}else if(cb.OLO>='10'&&cb.OLO!='100'){$('.Ov').fadeTo(cb.FIOL,"0."+cb.OLO)}else if(cb.OLO=='100'){$('.Ov').fadeIn(cb.FIOL)}}function Loading(){$('<div class="Loading">'+cb.LT+'</div>').hide().appendTo('body');ReposLoad();win.resize(function(){ReposLoad()});function ReposLoad(){var loadW=win.width()*0.505;$('.Loading').css({position:'fixed',padding:'0',top:win.height()/2+"px",fontFamily:'Arial',width:'100px',bottom:'0',right:'0',fontSize:cb.LTS+"px",textAlign:'center',left:loadW-50,zIndex:'1002',height:'0',color:cb.LTC});$('.Loading').show(0);$(".ChillBox,#shadow").css({top:win.height()/2+"px",left:win.width()/2+"px"});if($.browser.msie&&$.browser.version<=6||navigator.platform=='iPad'||navigator.platform=='iPhone'||navigator.platform=='iPod'){$(".ChillBox,#shadow").css({top:win.scrollTop()+win.height()/2+"px"})}}}});return this;};})(jQuery);